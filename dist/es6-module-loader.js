/*
 *  es6-module-loader v0.50.0
 *  https://github.com/ModuleLoader/es6-module-loader
 *  Copyright (c) 2016 Guy Bedford, Luke Hoban, Addy Osmani; Licensed 
 */

function URL(a,b){if("string"!=typeof a)throw new TypeError("URL must be a string");var c=String(a).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(?:\/\/(?:([^:@\/?#]*)(?::([^:@\/?#]*))?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);if(!c)throw new RangeError;var d=c[1]||"",e=c[2]||"",f=c[3]||"",g=c[4]||"",h=c[5]||"",i=c[6]||"",j=c[7]||"",k=c[8]||"",l=c[9]||"";if(void 0!==b){var m=b instanceof URL?b:new URL(b),n=""===d&&""===g&&""===e;n&&""===j&&""===k&&(k=m.search),n&&"/"!==j.charAt(0)&&(j=""!==j?(""===m.host&&""===m.username||""!==m.pathname?"":"/")+m.pathname.slice(0,m.pathname.lastIndexOf("/")+1)+j:m.pathname);var o=[];j.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(a){"/.."===a?o.pop():o.push(a)}),j=o.join("").replace(/^\//,"/"===j.charAt(0)?"/":""),n&&(i=m.port,h=m.hostname,g=m.host,f=m.password,e=m.username),""===d&&(d=m.protocol)}"file:"==d&&(j=j.replace(/\\/g,"/")),this.origin=d+(""!==d||""!==g?"//":"")+g,this.href=d+(""!==d||""!==g?"//":"")+(""!==e?e+(""!==f?":"+f:"")+"@":"")+g+j+k+l,this.protocol=d,this.username=e,this.password=f,this.host=g,this.hostname=h,this.port=i,this.pathname=j,this.search=k,this.hash=l}!function(a){function b(a,b){var c;if(a instanceof Error){var c=new a.constructor(a.message,a.fileName,a.lineNumber);c.message=a.message+"\n\t"+b,c.stack=a.stack}else c=a+"\n\t"+b;return c}function c(){this._loader={loaderObj:this,resolve:void 0,fetch:void 0,translate:void 0,instantiate:void 0,registry:{},newRegistry:new d}}function d(){this.registryMap=new a.Map}function e(a){return a.pipeline[0]}function f(a,b){var c=a._registry.registryData[b];if(!c)return null;var d=e(c),f=new Promise(function(a){a(d.result)});return{stage:d.stage,result:f,module:"ready"==d.stage?c.module:void 0,error:c.error?{value:c.error}:null}}function g(a,b,c){return a.registry[b]||(a.registry[b]={key:b,state:z,metadata:c||{},fetch:void 0,translate:void 0,instantiate:void 0,fetchResolve:void 0,translateResolve:void 0,instantiateResolve:void 0,dependencies:void 0,module:void 0,declare:void 0,error:null})}function h(a,b,c){b.fetchResolve?b.fetchResolve(c):b.fetch=Promise.resolve(c),b.fetchResolve=void 0,b.state=Math.max(b.state,A)}function i(a,b,c){b.translateResolve?b.translateResolve(c):b.translate=Promise.resolve(c),b.translateResolve=void 0,b.state=Math.max(b.state,B)}function j(a,b,c,d){if(void 0===c)var e=u(a.loaderObj,b.key,d,b.metadata);else if("function"!=typeof c)throw new TypeError("Instantiate must return an execution function.");b.instantiateResolve?b.instantiateResolve(c):b.instantiate=Promise.resolve(c),b.instantiateResolve=void 0;var f=[];if(void 0===c){b.declare=e.declare;for(var g=0;g<e.deps.length;g++)f.push({key:e.deps[g],value:void 0})}b.dependencies=f,b.module=c,b.state=Math.max(b.state,C)}function k(a,b,c,d){return Promise.resolve(void 0===c&&loadTranspiler(a.loaderObj)).then(function(){j(a,b,c,d)})}function l(a,c,d,e){return e=e||g(a,c,d),e.error?Promise.reject(e.error):e.state===E?Promise.reject(new Error(c+" cannot be fetched as it is already linked.")):e.fetch?e.fetch:(Promise.resolve().then(function(){return a.fetch.call(a.loaderObj,c,e.metadata)}).then(function(b){h(a,e,b)},function(a){throw b(a,"Fetching "+c)})["catch"](function(a){e.error=e.error||a}).then(function(){e.error&&e.fetchResolve&&e.fetchResolve(Promise.reject(e.error))}),e.fetch=new Promise(function(a){e.fetchResolve=a}))}function m(a,c,d,e){return e=e||g(a,c,d),e.error?Promise.reject(e.error):e.state===E?Promise.reject(new Error(c+" cannot initiate translate as it is already linked.")):e.translate?e.translate:(l(a,c,null,e).then(function(d){return Promise.resolve().then(function(){return a.translate.call(a.loaderObj,c,d,e.metadata)}).then(function(b){i(a,e,b)},function(a){throw b(a,"Translating "+c)})})["catch"](function(a){e.error=e.error||a}).then(function(){e.error&&e.translateResolve&&e.translateResolve(Promise.reject(e.error))}),e.translate=new Promise(function(a){e.translateResolve=a}))}function n(a,c,d,e){return e=e||g(a,c,d),e.error?Promise.reject(e.error):e.state===E?Promise.reject(new Error(c+" cannot instantiate as it is already linked.")):e.instantiate?e.instantiate:(m(a,c,null,e).then(function(d){return Promise.resolve().then(function(){return a.instantiate.call(a.loaderObj,c,d,e.metadata)}).then(function(b){return k(a,e,b,d)},function(a){throw b(a,"Instantiating "+c)})})["catch"](function(a){e.error=e.error||a}).then(function(){e.error&&e.instantiateResolve&&e.instantiateResolve(Promise.reject(e.error))}),e.instantiate=new Promise(function(a){e.instantiateResolve=a}))}function o(a,c,d,e){return e=e||g(a,c,d),e.state>C?e:n(a,c,null,e).then(function(){e.state=Math.max(e.state,D);for(var d=[],f=0;f<e.dependencies.length;f++)(function(b){var e={};d.push(Promise.resolve(a.resolve.call(a.loaderObj,b.key,c,e)).then(function(c){var d=g(a,c,e);return b.value=d,o(a,c,null,d)}))})(e.dependencies[f]);return Promise.all(d)["catch"](function(a){throw a=b(a,"Loading "+c),e.error=e.error||a,a})})}function p(a,b,c,d){return d=d||g(a,b,c),d.error?Promise.reject(d.error):d.state===E?Promise.resolve(d):o(a,b,c,d).then(function(){var a=[];r(d,a);for(var b=0;b<a.length;b++){var c=a[b];c.state==D&&"function"==typeof c.module&&(s(c),c.state=E)}return d.state==D&&declareModule(d),d})["catch"](function(a){throw d.error=a,a})}function q(a,c,d,e){return e=e||g(a,c,d),p(a,c,d,e).then(function(a){var d=a.module;if(d instanceof t)return d;var e=ensureModuleExecution(d,[]);if(e)throw e=b(e,"Error evaluating "+c),a.error=e,e;return d.module},function(a){throw e.error=e.error||a,a})}function r(a,b){if(b.indexOf(a)==-1){b.push(a);for(var c=0;c<a.dependencies.length;c++)r(a.dependencies[c].value,b)}}function s(a){if(a.error)throw a.error;try{a.module=a.module()}catch(b){throw a.error=b,b}}function t(a,b,c){for(var d in a)this[d]=a[d]}function u(){throw new TypeError("Native ES Module support not included in this loader.")}function v(){}function w(){}var x="object"==typeof exports&&"function"==typeof require,y="undefined"!=typeof process&&!!process.platform.match(/^win/),z=0,A=1,B=2,C=3,D=4,E=5;c.prototype["import"]=function(a,c){var d=this._loader,e={};return Promise.resolve().then(function(){return d.resolve.call(d.loaderObj,a,c,e)})["catch"](function(d){throw b(d,"Resolving "+a+(c?", "+c:""))}).then(function(a){return q(d,a,e)})},c.prototype.resolve=function(a,b,c){var d=this._loader;return d.resolve.call(d.loaderObj,a,b,c||{})},c.prototype.load=function(a,b,c){var d=this._loader;return"fetch"==b?l(d,a,c):"translate"==b?m(d,a,c):"instantiate"==b?o(d,a,c).then(function(a){if(!(a.module instanceof t))return a.module}):"link"==b?p(d,a,c).then(function(){}):b&&"ready"!=b?void 0:q(d,a,c).then(function(a){return a.module})},Object.defineProperty(c.prototype,"registry",{get:function(){return this._loader.newRegistry}}),c.prototype.provide=function(a,b,c,d){var e=this._loader,f=g(e,a,d);"fetch"==b?h(e,f,c):"translate"==b?i(e,f,c):"instantiate"==b&&(h(e,f,void 0),i(e,f,void 0),f.translate.then(function(a){k(e,f,c,a)}))};c.prototype.hook=function(a,b){var c=this._loader;return b?void(c[a]=b):c[a]},d.prototype.constructor=d,d.prototype.entries=function(){return this.registryMap.entries()},d.prototype.keys=function(){return this.registryMap.keys()},d.prototype.values=function(){return this.registryMap.values()},d.prototype.get=function(a){return this.registryMap.get(a)},d.prototype.set=function(a,b){return this.registryMap.set(a,b),this},d.prototype.has=function(a){return this.registryMap.has(a)},d.prototype["delete"]=function(a){return this.registryMap["delete"](a)},d.prototype.lookup=function(a){return f(this,a)},d.prototype.install=function(a,b){var c=new Promise(function(a){a(b)});this._registry.registryData[a]={key:a,pipeline:[{stage:"ready",result:c}],metadata:void 0,dependencies:void 0,module:b}},d.prototype.uninstall=function(a){if("object"!=typeof this)throw new TypeError("Registry must be an object");var b=this._registry.registryData[a];if(!b)throw new TypeError("Module "+a+" does not exist");var c=e(b);if("link"!==c.stage&&"ready"!==c.stage)throw new TypeError("Module "+a+" is still loading");delete this._registry.registryData[a]},d.prototype.cancel=function(a){if("object"!=typeof this)throw new TypeError("Registry must be an object");var b=this._registry.registryData[a];if(!b)throw new TypeError("Module "+a+" does not exist");var c=e(b);if("link"===c.stage||"ready"===c.stage)throw new TypeError("Module "+a+" is already done linking");delete this._registry.registryData[a]};var F;if("undefined"!=typeof XMLHttpRequest)F=function(a,b,c){function d(){b(f.responseText)}function e(){c(new Error("GET "+a+" "+f.status+" ("+f.statusText+")"))}var f=new XMLHttpRequest,g=!0,h=!1;if(!("withCredentials"in f)){var i=/^(\w+:)?\/\/([^\/]+)/.exec(a);i&&(g=i[2]===window.location.host,i[1]&&(g&=i[1]===window.location.protocol))}g||"undefined"==typeof XDomainRequest||(f=new XDomainRequest,f.onload=d,f.onerror=e,f.ontimeout=e,f.onprogress=function(){},f.timeout=0,h=!0),f.onreadystatechange=function(){4===f.readyState&&(200===f.status||0==f.status&&f.responseText?d():e())},f.open("GET",a,!0),h&&setTimeout(function(){f.send()},0),f.send(null)};else{if(!x)throw new TypeError("No environment fetch API available.");var G;F=function(a,b,c){if("file:///"!=a.substr(0,8))throw"Only file URLs of the form file: allowed running in Node.";G=G||require("fs"),a=y?a.replace(/\//g,"\\").substr(8):a.substr(7),G.readFile(a,function(a,d){a?c(a):b(d+"")})}}var H=function(){function a(a){if(b[a])return b[a];var c,d=0;for(var e in b){var f=e.split("*");if(f.length>2)throw new TypeError("Sites entry "+e+" contains multiple wildcards.");1!=f.length&&e.split("/").length>=d&&e.substr(0,f[0].length)===a.substr(0,f[0].length)&&e.substr(e.length-f[1].length)===f[1]&&(c=b[e].replace("*",a.substr(f[0].length,a.length-e.length+1)),d=e.split("/").length)}return c}c.call(this,arguments);var b={};this.site=function(a){for(var c in a)b[c]=a[c]},this.site.get=function(a){return b[a]},this.site.set=function(a,c){b[a]=c},this.site.has=function(a){return!!b[a]},this.site["delete"]=function(a){delete b[a]},this.hook("resolve",function(b,c,d){var e=a(b);return!e&&c||(c=I),new URL(e||b,c).href}),this.hook("fetch",function(a,b){return new Promise(function(b,c){F(a,b,c)})}),this.hook("translate",function(a,b,c){return b}),this.hook("instantiate",v),this.transpiler&&setupTranspilers(this)};w.prototype=c.prototype,H.prototype=new w;var I;"undefined"!=typeof document&&document.baseURI?I=document.baseURI:"undefined"!=typeof document&&document.getElementsByTagName?(I=document.getElementsByTagName("base")[0],I=I&&I.href):"undefined"!=typeof location&&location.href&&(I=location.href),I?(I=I.split("#")[0].split("?")[0],I=I.substr(0,I.lastIndexOf("/")+1)):"undefined"!=typeof process&&process.cwd&&(I="file://"+(y?"/":"")+process.cwd()+"/",y&&(I=I.replace(/\\/g,"/"))),I=new URL(I);var J=new H;J.constructor=H,a.LoaderPolyfill=c,a.ModulePolyfill=t,a.Reflect=a.Reflect||{},a.Reflect.Module=a.Reflect.Module||t,a.Reflect.Loader=a.Reflect.Loader||c,a.System=a.System||{},a.System.global=a.System.global||a,a.System.loader=a.System.loader||J,x&&(exports.Reflect=a.Reflect,exports.System=a.System)}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:global);
//# sourceMappingURL=es6-module-loader.js.map