/*!
*  es6-module-loader - v0.2.3 - 8/19/2013
*  https://github.com/ModuleLoader/es6-module-loader
*  Copyright (c) 2013 Guy Bedford, Luke Hoban, Addy Osmani; Licensed MIT
*/
!function(){!function(){function a(a){var b=function(){};b.prototype=a.global||(c?window:{}),this._builtins=new b;for(var f={},g=c?["alert","addEventListener","confirm","getComputedStyle","prompt","removeEventListener","setInterval","setTimeout"]:[],h=0;h<g.length;h++)!function(a){f[a]=function(){return window[a].apply(d,arguments)}}(g[h]);this.defineBuiltins(f),b=function(){},b.prototype=this._builtins,this._global=new b,e(this,"global",{configurable:!0,enumerable:!0,get:function(){return this._global}}),e(this._global,"window",{value:this._global}),this._strict=!!a.strict,this.normalize=a.normalize||d.System.normalize,this.resolve=a.resolve||d.System.resolve,this.fetch=a.fetch||d.System.fetch,this.translate=a.translate||d.System.translate,this.link=a.link||d.System.link,this._mios={},this._sloaded={},this._mloads={},this._sloads={}}function b(a){if("object"!=typeof a)throw new TypeError("Expected object");if(a instanceof b)return a;var c=this;for(var d in a)!function(b){e(c,b,{configurable:!1,enumerable:!0,get:function(){return a[b]}})}(d)}var c="undefined"!=typeof window,d=c?window:exports,e=function(a,b,c){try{Object.defineProperty(a,b,c)}catch(d){a[b]=c.value||c.get.call(a)}},f=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1};a.prototype.load=function(a,b,c){var d=this;if(a instanceof Array)for(var e=0,f=0;f<a.length;f++)!function(f){d.load(a[f],function(){e++,e==a.length&&b&&b()},c)}(f);else{if(this._sloaded[a])return b&&b(),void 0;if(this._sloads[a])return this._sloads[a].push({callback:b,errback:c}),void 0;this._sloads[a]=[{callback:b,errback:c}];var g=function(){for(var b=0;b<d._sloads[a].length;b++)d._sloads[a][b].callback&&d._sloads[a][b].callback();delete d._sloads[a]},h=function(b){for(var c=!0,e=0;e<d._sloads[a].length;e++)d._sloads[a][e].errback?d._sloads[a][e].errback(b):c=!1;if(delete d._sloads[a],!c)throw b};this.fetch(a,function(b){var c={address:a,type:"script"};b=d.translate(b,c),d._linkExecute(a,b,c,g,h,!0)},h)}},a.prototype["import"]=function(a,b,c,d){var e=this;if(a instanceof Array)for(var f=[],g=0,e=this,h=0;h<a.length;h++)!function(h){e["import"](a[h],function(c){f[h]=c,g++,g==a.length&&b&&b.apply(null,f)},c,d)}(h);else{a=this.normalize(a,d);var i={referer:d,metadata:"object"==typeof a?a.metadata:null};if("string"!=typeof a&&(a=a.normalized),this._mios[a])return b&&b(this._mios[a]);if(this._mloads[a])return this._mloads[a].push({callback:b,errback:c}),void 0;this._mloads[a]=[{callback:b,errback:c}];var j=function(b){e._mios[a]=b;for(var c=0;c<e._mloads[a].length;c++)e._mloads[a][c].callback&&e._mloads[a][c].callback(b);delete e._mloads[a]},k=function(b){var c=!0;if(!e._mloads[a])throw b;for(var d=0;d<e._mloads[a].length;d++)e._mloads[a][d].errback?e._mloads[a][d].errback(b):c=!1;if(delete e._mloads[a],!c)throw b},l=this.resolve(a,i);"string"!=typeof l&&(l=l.address),i.normalized=a,this.fetch(l,function(b){i.address=l,i.type="module",b=e.translate(b,i),e._linkExecute(a,b,i,j,k)},k,i)}};var g=0;a.prototype._linkExecute=function(a,c,d,e,f){a||(a="__eval"+g++);var h="script"==d.type,i=this.link(c,d);if(i instanceof b&&!h)return e(i);var j=this;m.loadEsprima(a,c,function(){var b,g;if("object"!=typeof i||h){var k=j._link(c,d);b=k.imports,g=k.execute}else b=i.imports,g=i.execute;if(!f.called){if(!b.length)return e(g.call(j));d.normalizeMap={};for(var l=[],m=0,n=0;n<b.length;n++)!function(c){var h={name:a,address:d.address},i=j.normalize(b[c],h);"object"==typeof i&&(i=i.normalized),d.normalizeMap[b[c]]=i,j["import"](b[c],function(a){if(m++,l[c]=a,m==b.length)try{var d=g.apply(j,l);e(d)}catch(h){return f(h),void 0}},f,h)}(n)}},f)},a.prototype._link=function(a,c){var d=this;return{imports:m.parseImports(c.normalized,a),execute:function(){var e;return e=m.parseEval(a,d,{name:c.normalized,sourceURL:c.address,isEval:"script"==c.type,normalizeMap:c.normalizeMap}),c.normalized&&"script"!=c.type?new b(e||{}):void 0}}},a.prototype.eval=function(a){m.parseEval(a,this,{isEval:!0})},a.prototype.evalAsync=function(a,b,c){this._linkExecute(null,a,{type:"script"},b||function(){},c||function(){})},a.prototype.get=function(a){return this._mios[a]||null},a.prototype.set=function(a,c){this._mios[a]=new b(c)},a.prototype.has=function(a){return!!this._mios[a]},a.prototype["delete"]=function(a){delete this._mios[a]},a.prototype.defineBuiltins=function(a){for(var b in a)a.hasOwnProperty(b)&&(this._builtins[b]=a[b])};var h,i=/^\/|([^\:\/]*:\/\/)/,j=function(a){return".js"==a.substr(a.length-3,3)||a.match(i)};if(c)h=function(a,b,c){if(window.ActiveXObject&&"file:"===window.location.protocol)var d=new ActiveXObject("Microsoft.XMLHTTP");else var d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&(200===d.status||0==d.status&&d.responseText?b(d.responseText):c(d.statusText||"XHR error"))},d.open("GET",a,!0),d.send(null)};else{var k=require("fs");h=function(a,b,c){return k.readFile(a,function(a,d){return a?c(a):(b(d+""),void 0)})}}var l=new a({global:c?window:d,strict:!1,normalize:function(a,b){if(j(a))return a;var c=b&&b.name;if("./"==a.substr(0,2)){var d=c&&c.split("/");return d&&d.length?(d.pop(),d.push(a.substr(2)),d.join("/")):a.substr(2)}if("../"==a.substr(0,3)){var d=c&&c.split("/");if(!d||!d.length)throw"Path below baseUrl";return d.pop(),this.normalize("./"+a.substr(3),{name:d.join("/")})}return a},resolve:function(a){for(var b in this.ondemandTable)if(-1!=f.call(this.ondemandTable[b],a))return a;return j(a)?a:this.baseURL+("/"!=this.baseURL.substr(this.baseURL.length-1,1)?"/":"")+a+(".js"==a.substr(a.length-3,3)?"":".js")},fetch:h,translate:function(a){return a},link:function(){}});l.baseURL=c?window.location.href.substring(0,window.location.href.lastIndexOf("/")+1):"./",l.ondemandTable={},l.ondemand=function(a){for(var b in a)this.ondemandTable[b]=this.ondemandTable[b]||[],a[b]instanceof Array?this.ondemandTable[b]=this.ondemandTable[b].concat(a[b]):this.ondemandTable[b].push(a[b])};var m={traverse:function(a,b){var c,d;if(b(a)!==!1)for(c in a)d=a[c],"object"==typeof d&&null!==d&&this.traverse(d,b)},importRegEx:/^\s*import\s+./m,exportRegEx:/^\s*export\s+(\{|\*|var|class|function|default)/m,moduleRegEx:/^\s*module\s+("[^"]+"|'[^']+')\s*\{/m,checkModuleSyntax:function(a,b){return(null==a||void 0===this.parseNames[a])&&(this.parseNames[a]=b&&!!(b.match(this.importRegEx)||b.match(this.exportRegEx)||b.match(this.moduleRegEx))),this.parseNames[a]},loadEsprima:function(a,b,c){if(this.esprima)return c();if(!this.polyfills.length&&!this.checkModuleSyntax(a,b))return c();for(var e,f,g=document.getElementsByTagName("script"),h=0;h<g.length&&(e=g[h],!(f=e.src.match(/es6-module-loader(\.min)?\.js/)?e.src.substr(0,e.src.lastIndexOf("/")+1)+"esprima-es6.min.js":e.getAttribute("data-esprima-src")));h++);var i=this;d.System.load(f,function(){i.esprima=d.System.global.esprima,c()})},parseNames:{},treeCache:{},parseImports:function(a,b){if(!this.checkModuleSyntax(a,b))return[];try{var c=this.treeCache[a]||(this.treeCache[a]=this.esprima.parse(b,{range:!0}))}catch(d){throw d.message='Esprima parser error in "'+a+'"\n '+d.message,d}var e=[];return this.traverse(c,function(a){"ImportDeclaration"==a.type?e.push(a.source.value):"ExportDeclaration"==a.type&&a.source&&e.push(a.source.value)}),e},addPolyfill:function(a){this.loadEsprima(null,null,function(){},function(){}),this.polyfills.push(a)},polyfills:[],applyPolyfill:function(a,b){for(var c=0;c<this.polyfills.length;c++)this.polyfills[c](a,b)},parseEval:function(a,b,c){if(!this.polyfills.length&&!this.checkModuleSyntax(c.name,a))return b.global.__Loader=b,scopedEval((b._strict?'"use strict";\n':"")+a,b.global,c.sourceURL),delete b.global.__Loader,void 0;var d=this.treeCache[c.name]||this.esprima.parse(a,{range:!0}),e=c.normalizeMap||{},f=new n(a),g=this;this.traverse(d,function(a){if("ImportDeclaration"==a.type){var b=e[a.source.value]||a.source.value;if("default"==a.kind)f.replace(a.range[0],a.range[1],"var "+a.specifiers[0].id.name+" = __Loader.get('"+b+"')['default'];");else{for(var c="var __module = __Loader.get('"+b+"');",d=0;d<a.specifiers.length;d++){var h=a.specifiers[d];c+="var "+(h.name?h.name.name:h.id.name)+" = __module['"+h.id.name+"'];"}f.replace(a.range[0],a.range[1],c)}}else if("ExportDeclaration"==a.type)if(a.declaration){var i,j=a.declaration.range[0]-1;if("VariableDeclaration"==a.declaration.type){var k=a.declaration.declarations[0];k.init&&(i=k.id.name,j=k.init.range[0]-1)}else("FunctionDeclaration"==a.declaration.type||"ClassDeclaration"==a.declaration.type)&&(i=a.declaration.id.name);a["default"]&&(i="default"),f.replace(a.range[0],j,"__exports['"+i+"'] = ")}else if(a.source){var b=e[a.source.value]||a.source.value;if("ExportBatchSpecifier"==a.specifiers[0].type)f.replace(a.range[0],a.range[1],"var __module = __Loader.get('"+b+"'); for (var m in __module) { __exports[m] = __module[m]; }; ");else{for(var c="var __module = __Loader.get('"+b+"'); ",d=0;d<a.specifiers.length;d++){var h=a.specifiers[d];c+="__exports['"+(h.name?h.name.name:h.id.name)+"'] = __module['"+h.id.name+"']; "}f.replace(a.range[0],a.range[1],c)}}else{for(var c="",d=0;d<a.specifiers.length;d++){var h=a.specifiers[d];c+="__exports['"+h.id.name+"'] = "+(h.name?h.name.name:h.id.name)+"; "}f.replace(a.range[0],a.range[1],c)}else"ModuleDeclaration"==a.type&&"BlockStatement"==a.body.type?(f.replace(a.range[0],a.body.range[0]+1,"(function() { var __exports = {}; "),f.replace(a.body.range[1],a.range[1]," __Loader.set('"+a.id.name+"', new Module(__exports)); })();")):g.polyfills.length&&g.applyPolyfill(a,f)}),delete this.treeCache[c.name],b.global.__Loader=b;var h=b.global.__exports={};if(scopedEval((b._strict?'"use strict";\n':"")+f.toString(),b.global,c.sourceURL),delete b.global.__Loader,delete b.global.__exports,c.isEval)for(var i in h)throw"Exports only supported for modules, not script evaluation.";return h}};c||(m.esprima=require("./esprima-es6.min.js"));var n=function(a){this.source=a,this.rangeOps=[]};n.prototype={mapIndex:function(a){for(var b=0;b<this.rangeOps.length;b++){var c=this.rangeOps[b];if(!(c.start>=a)){if(!(c.end<=a))throw"Source location "+a+" has already been transformed!";a+=c.diff}}return a},replace:function(a,b,c){var d=c.length-(b-a+1);a=this.mapIndex(a),b=this.mapIndex(b),this.source=this.source.substr(0,a)+c+this.source.substr(b+1),this.rangeOps.push({start:a,end:b,diff:d})},getRange:function(a,b){return this.source.substr(this.mapIndex(a),this.mapIndex(b))},toString:function(){return this.source}},d.Loader=a,d.Module=b,d.System=l}();var scopedEval=function(source,global,sourceURL){eval("(function(window) { with(global) { "+source+" } }).call(global, global);"+(sourceURL?"\n//# sourceURL="+sourceURL:""))}}();